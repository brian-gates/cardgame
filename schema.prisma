generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model Card {
  id    String @id @default(cuid())
  title String
  decks Deck[]
}

model Player {
  id        String      @id @default(cuid())
  health    Int
  maxHealth Int
  deck      Deck?       @relation()
  Encounter Encounter[]
}

model Deck {
  player   Player @relation(fields: [playerId], references: [id])
  playerId String @unique
  card     Card   @relation(fields: [cardId], references: [id])
  cardId   String

  @@id([playerId, cardId])
}

model Enemy {
  id        String      @id @default(cuid())
  health    Int
  maxHealth Int
  Encounter Encounter[]
}

model Encounter {
  enemy    Enemy  @relation(fields: [enemyId], references: [id])
  enemyId  String
  player   Player @relation(fields: [playerId], references: [id])
  playerId String

  @@id([playerId, enemyId])
}
